<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-1 bg-white dark:bg-gray-800 p-5 rounded-lg shadow">
        <h3 id="signal-form-title" class="font-semibold mb-4">Buat Sinyal Baru</h3>
        <form id="signal-form" class="space-y-4">
            <input type="hidden" id="signal-edit-id" value="">
            <div>
                <label class="text-sm font-medium">Pair</label>
                <input type="text" id="signal-pair" placeholder="e.g., BTC/USDT" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
            </div>
            <div>
                <label class="text-sm font-medium">Rekomendasi</label>
                <select id="signal-action" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
                    <option value="BUY">BUY</option>
                    <option value="SELL">SELL</option>
                </select>
            </div>
            <div>
                <label class="text-sm font-medium">Entri</label>
                <input type="number" id="signal-entry" step="any" placeholder="Harga masuk posisi" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
            </div>
            <div>
                <label class="text-sm font-medium">Stop Loss (SL)</label>
                <input type="number" id="signal-sl" step="any" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
            </div>
            <div id="take-profit-container">
                <label class="text-sm font-medium">Take Profit (TP)</label>
                <div class="mt-1 space-y-2">
                    <input type="number" name="signal_tp" step="any" placeholder="TP 1" class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
                    <input type="number" name="signal_tp" step="any" placeholder="TP 2 (Opsional)" class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
                    <input type="number" name="signal_tp" step="any" placeholder="TP 3 (Opsional)" class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
                </div>
            </div>
            <div class="flex items-center">
                <input type="checkbox" id="signal-is-premium" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded">
                <label for="signal-is-premium" class="ml-2 block text-sm">Sinyal Premium</label>
            </div>
            <div class="pt-2 space-y-3">
                 <button type="button" id="send-with-notification-btn" class="w-full bg-primary-600 text-white py-2 rounded-lg hover:bg-primary-700 font-semibold flex items-center justify-center space-x-2">
                    <i class="fas fa-bell"></i>
                    <span>Kirim dengan Notifikasi</span>
                </button>
                <button type="button" id="send-without-notification-btn" class="w-full bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 font-semibold flex items-center justify-center space-x-2">
                    <i class="fas fa-bell-slash"></i>
                    <span>Kirim tanpa Notifikasi</span>
                </button>
            </div>
        </form>
    </div>
    <div class="lg:col-span-2 bg-white dark:bg-gray-800 p-5 rounded-lg shadow">
        <h3 class="font-semibold mb-4">Daftar Sinyal Terkirim</h3>
        <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
                <thead class="bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 uppercase"><tr><th class="p-3">Pair</th><th class="p-3">Rekomendasi</th><th class="p-3">Entri</th><th class="p-3">Status</th><th class="p-3">Aksi</th></tr></thead>
                <tbody id="signals-table-body">
                    <tr class="border-b dark:border-gray-700" data-id="sig-001" data-pair="BTC/USDT" data-action="BUY" data-entry="68500" data-sl="67800" data-tp='["69500", "70000", "71200"]' data-premium="true">
                        <td class="p-3 font-medium">BTC/USDT</td><td class="p-3"><span class="font-semibold text-green-500">BUY</span></td><td class="p-3">68,500</td><td class="p-3"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300">Running</span></td><td class="p-3 space-x-2"><button class="edit-signal-btn text-blue-500 hover:text-blue-700" title="Edit"><i class="fas fa-edit"></i></button><button class="text-red-500 hover:text-red-700" title="Hapus"><i class="fas fa-trash"></i></button></td>
                    </tr>
                    <tr class="border-b dark:border-gray-700" data-id="sig-002" data-pair="ETH/USDT" data-action="SELL" data-entry="3600" data-sl="3750" data-tp='["3500", "3450"]' data-premium="false">
                        <td class="p-3 font-medium">ETH/USDT</td><td class="p-3"><span class="font-semibold text-red-500">SELL</span></td><td class="p-3">3,600</td><td class="p-3"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200">Closed</span></td><td class="p-3 space-x-2"><button class="edit-signal-btn text-blue-500 hover:text-blue-700" title="Edit"><i class="fas fa-edit"></i></button><button class="text-red-500 hover:text-red-700" title="Hapus"><i class="fas fa-trash"></i></button></td>
                    </tr>
                    <tr class="border-b dark:border-gray-700" data-id="sig-003" data-pair="XRP/USDT" data-action="BUY" data-entry="0.521" data-sl="0.510" data-tp='["0.535", "0.550"]' data-premium="false">
                        <td class="p-3 font-medium">XRP/USDT</td><td class="p-3"><span class="font-semibold text-green-500">BUY</span></td><td class="p-3">0.521</td><td class="p-3"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">Hit TP1</span></td><td class="p-3 space-x-2"><button class="edit-signal-btn text-blue-500 hover:text-blue-700" title="Edit"><i class="fas fa-edit"></i></button><button class="text-red-500 hover:text-red-700" title="Hapus"><i class="fas fa-trash"></i></button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div id="edit-signal-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 z-40 p-4">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
        <div class="p-5 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 id="edit-modal-title" class="text-xl font-semibold">Edit Sinyal</h3>
            <button id="close-edit-modal-btn" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl">&times;</button>
        </div>
        
        <div class="p-6 space-y-4 overflow-y-auto">
            <form id="edit-signal-form" class="space-y-4">
                 <input type="hidden" id="modal-signal-id">
                 <input type="hidden" id="modal-signal-status" value="">
                 <div><label class="text-sm font-medium">Pair</label><input type="text" id="modal-signal-pair" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md"></div>
                 <div><label class="text-sm font-medium">Entri</label><input type="number" id="modal-signal-entry" step="any" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md"></div>
                 <div><label class="text-sm font-medium">Stop Loss (SL)</label><input type="number" id="modal-signal-sl" step="any" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md"></div>
                 <div><label class="text-sm font-medium">Take Profit (TP)</label><div id="modal-tp-container" class="mt-1 space-y-2"><input type="number" name="modal_signal_tp" step="any" placeholder="TP 1" class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md"><input type="number" name="modal_signal_tp" step="any" placeholder="TP 2" class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md"><input type="number" name="modal_signal_tp" step="any" placeholder="TP 3" class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-md"></div></div>
            </form>
            <div class="pt-4 border-t dark:border-gray-700">
                <h4 class="font-semibold mb-3">Tutup Posisi Sinyal (Opsional)</h4>
                <div class="space-y-3">
                    <div id="loss-choice" class="status-choice" data-status="SL Hit">
                        <i class="far fa-circle status-icon text-gray-400"></i>
                        <i class="fas fa-check-circle status-icon-checked text-red-500"></i>
                        <span class="ml-3 font-semibold">Tandai Loss (SL Hit)</span>
                    </div>
                    <div id="profit-choice" class="status-choice" data-status-group="profit">
                        <i class="far fa-circle status-icon text-gray-400"></i>
                        <i class="fas fa-check-circle status-icon-checked text-green-500"></i>
                        <span class="ml-3 font-semibold">Tandai Profit (TP Hit)</span>
                    </div>
                </div>
                <div id="profit-options-container" class="hidden mt-4 pl-8 space-y-3">
                    <div class="profit-option-choice" data-status="Hit TP1">
                        <i class="far fa-circle status-icon text-gray-400"></i>
                        <i class="fas fa-check-circle status-icon-checked text-green-500"></i>
                        <span class="ml-3">TP 1</span>
                    </div>
                    <div class="profit-option-choice" data-status="Hit TP2">
                        <i class="far fa-circle status-icon text-gray-400"></i>
                        <i class="fas fa-check-circle status-icon-checked text-green-500"></i>
                        <span class="ml-3">TP 2</span>
                    </div>
                    <div class="profit-option-choice" data-status="Hit TP3">
                        <i class="far fa-circle status-icon text-gray-400"></i>
                        <i class="fas fa-check-circle status-icon-checked text-green-500"></i>
                        <span class="ml-3">TP 3</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex flex-wrap justify-end gap-3 border-t dark:border-gray-700">
            <button id="cancel-edit-btn" class="px-4 py-2 text-sm font-semibold rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600">Batal</button>
            <button id="update-no-notif-btn" class="px-4 py-2 text-sm font-semibold rounded-lg bg-gray-600 text-white hover:bg-gray-700 flex items-center space-x-2"><i class="fas fa-save"></i><span>Update (Tanpa Notif)</span></button>
            <button id="update-with-notif-btn" class="px-4 py-2 text-sm font-semibold rounded-lg bg-primary-600 text-white hover:bg-primary-700 flex items-center space-x-2"><i class="fas fa-bell"></i><span>Update & Kirim Notif</span></button>
        </div>
    </div>
</div>